{"version":3,"sources":["model/state.ts","ui/CzMap/common.ts","ui/CzMap/SvgMap.tsx","ui/CzMap/DistrictsMap.tsx","ui/CzMap/RegionsMap.tsx","api/runtime.ts","api/czDistricts.ts","model/nuts.ts","utils/compareStrings.ts","model/district.ts","model/region.ts","ui/Graph/Graph.tsx","ui/TimeIntervalToggle.tsx","App.tsx","serviceWorker.ts","model/store.ts","index.tsx"],"names":["DataView","SHAPE_KEYS","path","polygon","polyline","getAttributeFromEventTarget","e","attributeName","el","document","elementFromPoint","clientX","clientY","dataset","undefined","SvgMap","regions","onPointerMove","onFinalChange","style","viewBox","lastNotified","useRef","touchAction","id","current","buttons","onPointerDown","onPointerUp","map","elType","type","color","shape","code","React","createElement","stroke","fill","strokeWidth","strokeLinejoin","key","DistrictsMap","data","maxActiveCount","props","enhanced","useMemo","districts","x","interpolateReds","find","district","activeCount","RegionsMap","r","region","toJson","response","json","TIME_INTERVALS","label","milliseconds","initialState","rawData","dataView","window","localStorage","getItem","Region","regionCode","districtCode","timeIntervalMs","parseInt","needle","Date","rootSlice","createSlice","name","reducers","fetchDataSuccess","state","action","payload","maxTimestamp","forEach","item","date","getTime","setDistrictCode","setRegionCode","switchDataView","setTimeIntervalMs","setNeedle","actions","fetchDataAsync","dispatch","fetch","resource","then","rawItems","parsedItems","d","push","curedCount","kumulativni_pocet_vylecenych","datum","deathCount","kumulativni_pocet_umrti","okres_lau_kod","infectedCount","kumulativni_pocet_nakazenych","kraj_nuts_kod","getCzDistricts","selectDataView","root","TODAY","select","selectDataWithDataView","createSelector","items","groups","getUTCFullYear","getUTCMonth","getUTCDate","existing","newItems","Object","keys","groupId","groupByRegion","selectMaxActiveCount","getMaxActiveCount","selectDataForMap","filter","selectDataForGraph","District","spc","asc","a","b","localeCompare","all","nuts","length","sort","Graph","onChangeNeedle","derivedData","y","detailPoint","startDate","defaultValue","minY","maxY","xDomain","yDomain","handleNearestX","useCallback","value","event","flex","display","flexDirection","userSelect","position","xType","fontSize","tickLabelAngle","onNearestX","box","line","backgroundColor","values","padding","opacity","TimeIntervalToggle","onChange","handleChange","newValue","ToggleButtonGroup","size","exclusive","ToggleButton","Wrapper","styled","height","Toolbar","alignItems","LinksBox","textAlign","NoData","SourceLink","useStyles","makeStyles","App","useSelector","dataForMap","useDispatch","handleRegionDistrictChange","target","handleDataViewChange","useEffect","classes","Select","variant","marginRight","outlined","MenuItem","allRegions","allDistricts","newTimeIntervalMs","href","rel","Boolean","location","hostname","match","store","configureStore","reducer","rootReducer","middleware","getDefaultMiddleware","serializableCheck","immutableCheck","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.ed850cd7.chunk.js","sourcesContent":["import { DistrictStatsRecord, get as getCzDistricts } from '../api/czDistricts';\n\nimport { createSlice, PayloadAction, createSelector } from '@reduxjs/toolkit';\nimport { AppThunk, RootState } from './store';\n\nconst DEFAULT_REGION = 'CZ064'; // Jihomoravský kraj\nconst DEFAULT_DISTRICT = 'CZ0642'; // Brno-město\n\nexport enum DataView {\n  Country = 'country',\n  Region = 'region',\n  District = 'district',\n}\n\nconst DAY_MS = 1000 * 60 * 60 * 24;\n\ntype TimeInterval = {\n  id: string;\n  label: string;\n  milliseconds: number;\n};\n\nexport const TIME_INTERVALS: TimeInterval[] = [\n  { id: '7days', label: '7 dní', milliseconds: 7 * DAY_MS },\n  { id: '14days', label: '14 dní', milliseconds: 14 * DAY_MS },\n  { id: '30days', label: '30 dní', milliseconds: 30 * DAY_MS },\n  { id: 'all', label: 'vše', milliseconds: 1000000 * DAY_MS },\n];\n\ninterface State {\n  // Main data\n  rawData: DistrictStatsRecord[];\n\n  // Persistent settings\n  dataView: DataView;\n  regionCode: string;\n  districtCode: string;\n  timeIntervalMs: number;\n\n  // Temporary settings\n  needle: Date;\n}\n\nconst initialState: State = {\n  // Main data\n  rawData: [],\n\n  // Persistent settings\n  dataView:\n    (window.localStorage.getItem('dataView') as DataView) || DataView.Region,\n  regionCode: window.localStorage.getItem('regionCode') || DEFAULT_REGION,\n  districtCode: window.localStorage.getItem('districtCode') || DEFAULT_DISTRICT,\n  timeIntervalMs:\n    parseInt(window.localStorage.getItem('timeIntervalMs') || '') ||\n    TIME_INTERVALS.find(({ id }) => id === '30days')!.milliseconds,\n\n  // Temporary settings\n  needle: new Date(0),\n};\n\nexport const rootSlice = createSlice({\n  name: 'root',\n  initialState,\n  reducers: {\n    fetchDataSuccess: (state, action: PayloadAction<DistrictStatsRecord[]>) => {\n      state.rawData = action.payload;\n\n      let maxTimestamp = 0;\n      action.payload.forEach((item) => {\n        if (item.date.getTime() > maxTimestamp) {\n          maxTimestamp = item.date.getTime();\n        }\n      });\n      state.needle = new Date(maxTimestamp);\n    },\n    setDistrictCode: (state, action: PayloadAction<string>) => {\n      state.districtCode = action.payload;\n    },\n    setRegionCode: (state, action: PayloadAction<string>) => {\n      state.regionCode = action.payload;\n    },\n    switchDataView: (state, action: PayloadAction<DataView>) => {\n      state.dataView = action.payload;\n    },\n    setTimeIntervalMs: (state, action: PayloadAction<number>) => {\n      state.timeIntervalMs = action.payload;\n    },\n    setNeedle: (state, action: PayloadAction<Date>) => {\n      state.needle = action.payload;\n    },\n  },\n});\n\nexport const {\n  setDistrictCode,\n  setRegionCode,\n  switchDataView,\n  setNeedle,\n  setTimeIntervalMs,\n} = rootSlice.actions;\n\nexport const fetchDataAsync = (): AppThunk => (dispatch) => {\n  getCzDistricts().then((data) =>\n    dispatch(rootSlice.actions.fetchDataSuccess(data))\n  );\n};\n\n// Selectors\n\nexport const selectRawData = (state: RootState) => state.root.rawData;\nexport const selectDataView = (state: RootState) => state.root.dataView;\nexport const selectRegionCode = (state: RootState) => state.root.regionCode;\nexport const selectDistrictCode = (state: RootState) => state.root.districtCode;\nexport const selectTimeIntervalMs = (state: RootState) =>\n  state.root.timeIntervalMs;\nexport const selectNeedle = (state: RootState) => state.root.needle;\n\nconst TODAY = new Date();\n\nexport interface DistrictStatsComputed extends DistrictStatsRecord {\n  activeCount: number;\n}\n\nexport const groupByRegion = (items: DistrictStatsRecord[]) => {\n  const groups: Record<string, DistrictStatsRecord> = {};\n  items.forEach((item) => {\n    const key = `${item.date.getUTCFullYear()}-${item.date.getUTCMonth()}-${item.date.getUTCDate()}_${\n      item.region\n    }`;\n    if (!groups[key]) {\n      groups[key] = { ...item, district: '' };\n    } else {\n      const existing = groups[key];\n      groups[key] = {\n        ...existing,\n        curedCount: existing.curedCount + item.curedCount,\n        deathCount: existing.deathCount + item.deathCount,\n        infectedCount: existing.infectedCount + item.infectedCount,\n      };\n    }\n  });\n\n  const newItems: DistrictStatsRecord[] = [];\n  Object.keys(groups).forEach((groupId) => newItems.push(groups[groupId]));\n  return newItems;\n};\n\nexport const getMaxActiveCount = (items: DistrictStatsComputed[]) => {\n  let maxActiveCount = 0;\n  items.forEach((x) => {\n    if (x.activeCount > maxActiveCount) {\n      maxActiveCount = x.activeCount;\n    }\n  });\n  return maxActiveCount;\n};\n\nexport const select = (state: RootState) => state.root;\n\nexport const selectDataWithDataView = createSelector(\n  selectRawData,\n  selectDataView,\n  (rawData, dataView) => {\n    let filtered =\n      dataView === DataView.Region ? groupByRegion(rawData) : rawData;\n\n    return filtered.map(\n      (x): DistrictStatsComputed => {\n        return {\n          ...x,\n          activeCount: x.infectedCount - x.deathCount - x.curedCount,\n        };\n      }\n    );\n  }\n);\n\nexport const selectMaxActiveCount = createSelector(\n  selectDataWithDataView,\n  (data) => getMaxActiveCount(data)\n);\n\nexport const selectDataForMap = createSelector(\n  selectDataWithDataView,\n  selectNeedle,\n  (data, needle) => data.filter((x) => x.date.getTime() === needle.getTime())\n);\n\nexport const selectDataForGraph = createSelector(\n  selectDataWithDataView,\n  selectDataView,\n  selectRegionCode,\n  selectDistrictCode,\n  selectTimeIntervalMs,\n  (rawData, dataView, regionCode, districtCode, timeIntervalMs) => {\n    return rawData.filter((x) => {\n      return (\n        ((dataView === DataView.District && x.district === districtCode) ||\n          (dataView === DataView.Region && x.region === regionCode)) &&\n        TODAY.getTime() - x.date.getTime() <= timeIntervalMs\n      );\n    });\n  }\n);\n\nexport default rootSlice.reducer;\n","export const SHAPE_KEYS: Record<string, string> = {\n  path: 'd',\n  polygon: 'points',\n  polyline: 'points',\n};\n","import React, { useRef } from 'react';\nimport { SHAPE_KEYS } from './common';\n\nexport interface MapRegion {\n  shape: string;\n  type: string;\n  code: string;\n  color: string;\n}\n\nexport interface SvgMapProps {\n  regions: MapRegion[];\n  style?: React.CSSProperties;\n  viewBox: string;\n  onPointerMove?: (id: string | undefined) => void;\n  onFinalChange?: (id: string | undefined) => void;\n}\n\nconst getAttributeFromEventTarget = (\n  e: React.PointerEvent<SVGSVGElement>,\n  attributeName: string\n): string | undefined => {\n  const el = document.elementFromPoint(e.clientX, e.clientY) as\n    | SVGElement\n    | undefined;\n  return el && el.dataset ? el.dataset[attributeName] : undefined;\n};\n\nconst SvgMap = ({\n  regions,\n  onPointerMove,\n  onFinalChange,\n  style = {},\n  viewBox,\n}: SvgMapProps) => {\n  const lastNotified = useRef<string | undefined>(undefined);\n  return (\n    <svg\n      viewBox={viewBox}\n      style={{ touchAction: 'none', ...style }}\n      onPointerMove={(e) => {\n        const id = getAttributeFromEventTarget(e, 'id');\n        if (id !== lastNotified.current && e.buttons === 1 && onPointerMove) {\n          lastNotified.current = id;\n          onPointerMove(id);\n        }\n      }}\n      onPointerDown={(e) => {\n        const id = getAttributeFromEventTarget(e, 'id');\n        if (id !== lastNotified.current && onPointerMove) {\n          lastNotified.current = id;\n          onPointerMove(id);\n        }\n      }}\n      onPointerUp={(e) => {\n        const id = getAttributeFromEventTarget(e, 'id');\n        if (id !== lastNotified.current) {\n          if (onPointerMove) {\n            onPointerMove(id);\n          }\n        }\n        if (onFinalChange) {\n          onFinalChange(id);\n        }\n        lastNotified.current = undefined;\n      }}\n    >\n      <g>\n        {regions.map(({ type: elType, color, shape, code }) =>\n          React.createElement(elType, {\n            style: {\n              stroke: '#888',\n              fill: color,\n              strokeWidth: 1,\n              strokeLinejoin: 'bevel',\n            },\n            key: code,\n            'data-id': code,\n            [SHAPE_KEYS[elType]]: shape,\n          })\n        )}\n      </g>\n    </svg>\n  );\n};\n\nexport default SvgMap;\n","import React, { useMemo } from 'react';\nimport districts from './districts.json';\nimport SvgMap, { SvgMapProps } from './SvgMap';\nimport { interpolateReds } from 'd3-scale-chromatic';\nimport { DistrictStatsComputed } from '../../model/state';\n\nconst DistrictsMap = ({\n  data,\n  maxActiveCount,\n  ...props\n}: Omit<SvgMapProps, 'regions' | 'viewBox'> & {\n  data: DistrictStatsComputed[];\n  maxActiveCount: number;\n}) => {\n  const enhanced = useMemo(() => {\n    return districts.map((x) => ({\n      ...x,\n      color: interpolateReds(\n        (data.find(({ district }) => district === x.code)?.activeCount || 0) /\n          (maxActiveCount || 1)\n      ),\n    }));\n  }, [maxActiveCount, data]);\n\n  return <SvgMap regions={enhanced} viewBox=\"0 0 748 500.3\" {...props} />;\n};\n\nexport default DistrictsMap;\n","import React, { useMemo } from 'react';\nimport regions from './regions.json';\nimport SvgMap, { SvgMapProps } from './SvgMap';\nimport { DistrictStatsComputed } from '../../model/state';\nimport { interpolateReds } from 'd3-scale-chromatic';\n\nconst RegionsMap = ({\n  data,\n  maxActiveCount,\n  ...props\n}: Omit<SvgMapProps, 'regions' | 'viewBox'> & {\n  data: DistrictStatsComputed[];\n  maxActiveCount: number;\n}) => {\n  const enhanced = useMemo(() => {\n    return regions.map((r) => ({\n      ...r,\n      color: interpolateReds(\n        (data.find(({ region }) => region === r.code)?.activeCount || 0) /\n          (maxActiveCount || 1)\n      ),\n    }));\n  }, [maxActiveCount, data]);\n  return <SvgMap regions={enhanced} viewBox=\"0 0 357.4 233.8\" {...props} />;\n};\n\nexport default RegionsMap;\n","export const toJson = <T = any>(response: Response): Promise<T> =>\n  response.json();\n","import { toJson } from './runtime';\n\nconst mzcrUrl = (resource: string) =>\n  `https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19/${resource}.min.json`;\n\nexport interface DistrictStatsRecord {\n  curedCount: number;\n  date: Date;\n  deathCount: number;\n  district: string;\n  infectedCount: number;\n  region: string;\n}\n\ninterface GetResponse {\n  data: {\n    datum: string;\n    kraj_nuts_kod: string;\n    kumulativni_pocet_nakazenych: number;\n    kumulativni_pocet_umrti: number;\n    kumulativni_pocet_vylecenych: number;\n    okres_lau_kod: string;\n  }[];\n}\n\nexport const get = (): Promise<DistrictStatsRecord[]> =>\n  fetch(mzcrUrl('kraj-okres-nakazeni-vyleceni-umrti'))\n    .then(toJson)\n    .then(({ data: rawItems }: GetResponse) => {\n      const parsedItems: DistrictStatsRecord[] = [];\n      rawItems.forEach((d) => {\n        // const district = districtById(d.okres_lau_kod);\n        // if (!district) {\n        //   console.warn(`Couldn't find a district with ID ${d.okres_lau_kod}`);\n        //   return;\n        // }\n        // const region = regionById(d.kraj_nuts_kod);\n        // if (!region) {\n        //   console.warn(`Couldn't find a region with ID ${d.kraj_nuts_kod}`);\n        //   return;\n        // }\n\n        parsedItems.push({\n          curedCount: d.kumulativni_pocet_vylecenych,\n          date: new Date(d.datum),\n          deathCount: d.kumulativni_pocet_umrti,\n          district: d.okres_lau_kod,\n          infectedCount: d.kumulativni_pocet_nakazenych,\n          region: d.kraj_nuts_kod,\n        });\n      });\n\n      return parsedItems;\n    });\n","export interface NutsItem {\n  id: string;\n  name: string;\n  spc: string;\n}\n\nexport default [\n  { id: 'CZ01', name: 'Praha', spc: 'CZ0100' },\n  { id: 'CZ010', name: 'Hlavní město Praha', spc: 'CZ0110' },\n  { id: 'CZ0100', name: 'Praha', spc: 'CZ010' },\n  { id: 'CZ02', name: 'Střední Čechy', spc: 'CZ0200' },\n  { id: 'CZ020', name: 'Středočeský kraj', spc: 'CZ0210' },\n  { id: 'CZ0201', name: 'Benešov', spc: 'CZ0211' },\n  { id: 'CZ0202', name: 'Beroun', spc: 'CZ0212' },\n  { id: 'CZ0203', name: 'Kladno', spc: 'CZ0213' },\n  { id: 'CZ0204', name: 'Kolín', spc: 'CZ0214' },\n  { id: 'CZ0205', name: 'Kutná Hora', spc: 'CZ0215' },\n  { id: 'CZ0206', name: 'Mělník', spc: 'CZ0216' },\n  { id: 'CZ0207', name: 'Mladá Boleslav', spc: 'CZ0217' },\n  { id: 'CZ0208', name: 'Nymburk', spc: 'CZ0218' },\n  { id: 'CZ0209', name: 'Praha-východ', spc: 'CZ0219' },\n  { id: 'CZ020A', name: 'Praha-západ', spc: 'CZ021A' },\n  { id: 'CZ020B', name: 'Příbram', spc: 'CZ021B' },\n  { id: 'CZ020C', name: 'Rakovník', spc: 'CZ021C' },\n  { id: 'CZ03', name: 'Jihozápad', spc: 'CZ0300' },\n  { id: 'CZ031', name: 'Jihočeský kraj', spc: 'CZ0310' },\n  { id: 'CZ0311', name: 'České Budějovice', spc: 'CZ0311' },\n  { id: 'CZ0312', name: 'Český Krumlov', spc: 'CZ0312' },\n  { id: 'CZ0313', name: 'Jindřichův Hradec', spc: 'CZ0313' },\n  { id: 'CZ0314', name: 'Písek', spc: 'CZ0314' },\n  { id: 'CZ0315', name: 'Prachatice', spc: 'CZ0315' },\n  { id: 'CZ0316', name: 'Strakonice', spc: 'CZ0316' },\n  { id: 'CZ0317', name: 'Tábor', spc: 'CZ0317' },\n  { id: 'CZ032', name: 'Plzeňský kraj', spc: 'CZ0320' },\n  { id: 'CZ0321', name: 'Domažlice', spc: 'CZ0321' },\n  { id: 'CZ0322', name: 'Klatovy', spc: 'CZ0322' },\n  { id: 'CZ0323', name: 'Plzeň-město', spc: 'CZ0323' },\n  { id: 'CZ0324', name: 'Plzeň-jih', spc: 'CZ0324' },\n  { id: 'CZ0325', name: 'Plzeň-sever', spc: 'CZ0325' },\n  { id: 'CZ0326', name: 'Rokycany', spc: 'CZ0326' },\n  { id: 'CZ0327', name: 'Tachov', spc: 'CZ0327' },\n  { id: 'CZ04', name: 'Severozápad', spc: 'CZ0400' },\n  { id: 'CZ041', name: 'Karlovarský kraj', spc: 'CZ0410' },\n  { id: 'CZ0411', name: 'Cheb', spc: 'CZ0411' },\n  { id: 'CZ0412', name: 'Karlovy Vary', spc: 'CZ0412' },\n  { id: 'CZ0413', name: 'Sokolov', spc: 'CZ0413' },\n  { id: 'CZ042', name: 'Ústecký kraj', spc: 'CZ0420' },\n  { id: 'CZ0421', name: 'Děčín', spc: 'CZ0421' },\n  { id: 'CZ0422', name: 'Chomutov', spc: 'CZ0422' },\n  { id: 'CZ0423', name: 'Litoměřice', spc: 'CZ0423' },\n  { id: 'CZ0424', name: 'Louny', spc: 'CZ0424' },\n  { id: 'CZ0425', name: 'Most', spc: 'CZ0425' },\n  { id: 'CZ0426', name: 'Teplice', spc: 'CZ0426' },\n  { id: 'CZ0427', name: 'Ústí nad Labem', spc: 'CZ0427' },\n  { id: 'CZ05', name: 'Severovýchod', spc: 'CZ0500' },\n  { id: 'CZ051', name: 'Liberecký kraj', spc: 'CZ0510' },\n  { id: 'CZ0511', name: 'Česká Lípa', spc: 'CZ0511' },\n  { id: 'CZ0512', name: 'Jablonec nad Nisou', spc: 'CZ0512' },\n  { id: 'CZ0513', name: 'Liberec', spc: 'CZ0513' },\n  { id: 'CZ0514', name: 'Semily', spc: 'CZ0514' },\n  { id: 'CZ052', name: 'Královéhradecký kraj', spc: 'CZ0520' },\n  { id: 'CZ0521', name: 'Hradec Králové', spc: 'CZ0521' },\n  { id: 'CZ0522', name: 'Jičín', spc: 'CZ0522' },\n  { id: 'CZ0523', name: 'Náchod', spc: 'CZ0523' },\n  { id: 'CZ0524', name: 'Rychnov nad Kněžnou', spc: 'CZ0524' },\n  { id: 'CZ0525', name: 'Trutnov', spc: 'CZ0525' },\n  { id: 'CZ053', name: 'Pardubický kraj', spc: 'CZ0530' },\n  { id: 'CZ0531', name: 'Chrudim', spc: 'CZ0531' },\n  { id: 'CZ0532', name: 'Pardubice', spc: 'CZ0532' },\n  { id: 'CZ0533', name: 'Svitavy', spc: 'CZ0533' },\n  { id: 'CZ0534', name: 'Ústí nad Orlicí', spc: 'CZ0534' },\n  { id: 'CZ06', name: 'Jihovýchod', spc: 'CZ0600' },\n  { id: 'CZ063', name: 'Kraj Vysočina', spc: 'CZ0610' },\n  { id: 'CZ0631', name: 'Havlíčkův Brod', spc: 'CZ0611' },\n  { id: 'CZ0632', name: 'Jihlava', spc: 'CZ0612' },\n  { id: 'CZ0633', name: 'Pelhřimov', spc: 'CZ0613' },\n  { id: 'CZ0634', name: 'Třebíč', spc: 'CZ0614' },\n  { id: 'CZ0635', name: 'Žďár nad Sázavou', spc: 'CZ0615' },\n  { id: 'CZ064', name: 'Jihomoravský kraj', spc: 'CZ0620' },\n  { id: 'CZ0641', name: 'Blansko', spc: 'CZ0621' },\n  { id: 'CZ0642', name: 'Brno-město', spc: 'CZ0622' },\n  { id: 'CZ0643', name: 'Brno-venkov', spc: 'CZ0623' },\n  { id: 'CZ0644', name: 'Břeclav', spc: 'CZ0624' },\n  { id: 'CZ0645', name: 'Hodonín', spc: 'CZ0625' },\n  { id: 'CZ0646', name: 'Vyškov', spc: 'CZ0626' },\n  { id: 'CZ0647', name: 'Znojmo', spc: 'CZ0627' },\n  { id: 'CZ07', name: 'Střední Morava', spc: 'CZ0700' },\n  { id: 'CZ071', name: 'Olomoucký kraj', spc: 'CZ0710' },\n  { id: 'CZ0711', name: 'Jeseník', spc: 'CZ0711' },\n  { id: 'CZ0712', name: 'Olomouc', spc: 'CZ0712' },\n  { id: 'CZ0713', name: 'Prostějov', spc: 'CZ0713' },\n  { id: 'CZ0714', name: 'Přerov', spc: 'CZ0714' },\n  { id: 'CZ0715', name: 'Šumperk', spc: 'CZ0715' },\n  { id: 'CZ072', name: 'Zlínský kraj', spc: 'CZ0720' },\n  { id: 'CZ0721', name: 'Kroměříž', spc: 'CZ0721' },\n  { id: 'CZ0722', name: 'Uherské Hradiště', spc: 'CZ0722' },\n  { id: 'CZ0723', name: 'Vsetín', spc: 'CZ0723' },\n  { id: 'CZ0724', name: 'Zlín', spc: 'CZ0724' },\n  { id: 'CZ08', name: 'Moravskoslezsko', spc: 'CZ0800' },\n  { id: 'CZ080', name: 'Moravskoslezský kraj', spc: 'CZ0810' },\n  { id: 'CZ0801', name: 'Bruntál', spc: 'CZ0811' },\n  { id: 'CZ0802', name: 'Frýdek-Místek', spc: 'CZ0812' },\n  { id: 'CZ0803', name: 'Karviná', spc: 'CZ0813' },\n  { id: 'CZ0804', name: 'Nový Jičín', spc: 'CZ0814' },\n  { id: 'CZ0805', name: 'Opava', spc: 'CZ0815' },\n  { id: 'CZ0806', name: 'Ostrava-město', spc: 'CZ0816' },\n] as NutsItem[];\n","export const asc = (a: string, b: string) => a.localeCompare(b);\nexport const desc = (a: string, b: string) => b.localeCompare(a);\n","import nuts from './nuts';\nimport { asc } from '../utils/compareStrings';\n\nexport const all = nuts\n  .filter(({ id }) => id.length === 6)\n  .sort((a, b) => asc(a.name, b.name));\n\nexport const byId = (id: string) => all.find((d) => d.id === id);\n","import nuts from './nuts';\nimport { asc } from '../utils/compareStrings';\n\nexport const all = nuts\n  .filter(({ id }) => id.length === 5)\n  .sort((a, b) => asc(a.name, b.name));\n\nexport const byId = (id: string) => all.find((d) => d.id === id);\n","import React, { useMemo, useCallback } from 'react';\nimport {\n  FlexibleXYPlot,\n  XAxis,\n  YAxis,\n  VerticalGridLines,\n  HorizontalGridLines,\n  LineSeries,\n  Crosshair,\n  LineSeriesPoint,\n} from 'react-vis';\nimport { DistrictStatsComputed } from '../../model/state';\nimport 'react-vis/dist/style.css';\n\nexport interface GraphProps {\n  data: DistrictStatsComputed[];\n  needle?: number;\n  onChangeNeedle?: (needle: number) => void;\n}\n\nconst formatDate = (date: Date) =>\n  `${date.getUTCDate()}. ${date.getUTCMonth() + 1}. ${date.getUTCFullYear()}`;\n\nconst Graph = ({ data, onChangeNeedle, needle }: GraphProps) => {\n  const derivedData = useMemo<LineSeriesPoint[]>(() => {\n    return data.map((item) => ({\n      x: item.date.getTime(),\n      y: item.activeCount,\n    }));\n  }, [data]);\n\n  const detailPoint = useMemo(\n    () => (needle ? derivedData.find((item) => item.x === needle) : undefined),\n    [derivedData, needle]\n  );\n\n  const { xDomain, yDomain } = useMemo(() => {\n    let startDate = new Date();\n    let defaultValue = data.length > 0 ? data[0].activeCount : 0;\n    let minY = defaultValue;\n    let maxY = defaultValue;\n\n    data.forEach((item) => {\n      if (item.date.getTime() < startDate.getTime()) {\n        startDate = item.date;\n      }\n      if (item.activeCount < minY) {\n        minY = item.activeCount;\n      }\n      if (item.activeCount > maxY) {\n        maxY = item.activeCount;\n      }\n    });\n\n    return {\n      xDomain: [startDate, new Date()],\n      yDomain: [minY, maxY],\n    };\n  }, [data]);\n\n  const handleNearestX = useCallback(\n    (value: LineSeriesPoint, { event }) => {\n      if (\n        (typeof event.buttons === 'undefined' || event.buttons === 1) &&\n        onChangeNeedle\n      ) {\n        onChangeNeedle(value.x);\n      }\n    },\n    [onChangeNeedle]\n  );\n\n  return (\n    <div\n      style={{\n        flex: 1,\n        display: 'flex',\n        flexDirection: 'column',\n        userSelect: 'none',\n      }}\n    >\n      <div style={{ flex: 1, position: 'relative' }}>\n        <FlexibleXYPlot\n          xDomain={xDomain}\n          yDomain={yDomain}\n          xType=\"time\"\n          style={{\n            fontSize: 12,\n          }}\n        >\n          <VerticalGridLines />\n          <HorizontalGridLines />\n          <XAxis tickLabelAngle={-45} />\n          <YAxis />\n          <LineSeries\n            data={derivedData}\n            onNearestX={handleNearestX}\n            style={{\n              fill: 'none',\n            }}\n          />\n          <Crosshair\n            style={{\n              box: { display: 'none' },\n              line: { backgroundColor: '#bbb' },\n            }}\n            values={detailPoint ? [detailPoint] : undefined}\n          />\n        </FlexibleXYPlot>\n      </div>\n      <div style={{ padding: 16, opacity: needle ? 1 : 0 }}>\n        {formatDate(new Date(detailPoint?.x || 0))}:{' '}\n        <strong>{detailPoint?.y}</strong> aktivních nakažených ⤴️\n      </div>\n    </div>\n  );\n};\n\nexport default Graph;\n","import React, { useCallback } from 'react';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\nimport { TIME_INTERVALS } from '../model/state';\n\nconst TimeIntervalToggle = ({\n  value,\n  onChange,\n}: {\n  value: number;\n  onChange?: (value: number) => void;\n}) => {\n  const handleChange = useCallback(\n    (e, newValue: number) => {\n      if (onChange) {\n        onChange(newValue);\n      }\n    },\n    [onChange]\n  );\n  return (\n    <ToggleButtonGroup\n      size=\"small\"\n      value={value}\n      exclusive\n      onChange={handleChange}\n    >\n      {TIME_INTERVALS.map((x) => (\n        <ToggleButton key={x.id} value={x.milliseconds}>\n          {x.label}\n        </ToggleButton>\n      ))}\n    </ToggleButtonGroup>\n  );\n};\n\nexport default TimeIntervalToggle;\n","import React, { useCallback, useEffect } from 'react';\nimport DistrictsMap from './ui/CzMap/DistrictsMap';\nimport RegionsMap from './ui/CzMap/RegionsMap';\nimport { styled, makeStyles } from '@material-ui/core/styles';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { useSelector, useDispatch } from 'react-redux';\nimport {\n  DataView,\n  select,\n  fetchDataAsync,\n  setRegionCode,\n  setDistrictCode,\n  switchDataView,\n  selectDataForGraph,\n  setTimeIntervalMs,\n  selectDataForMap,\n  selectMaxActiveCount,\n  setNeedle,\n} from './model/state';\nimport { all as allDistricts } from './model/district';\nimport { all as allRegions } from './model/region';\nimport Graph from './ui/Graph/Graph';\nimport TimeIntervalToggle from './ui/TimeIntervalToggle';\n\nconst Wrapper = styled('div')({\n  display: 'flex',\n  flexDirection: 'column',\n  height: '100vh',\n  color: '#333333',\n});\n\nconst Toolbar = styled('div')({\n  display: 'flex',\n  alignItems: 'center',\n  padding: '8px 16px',\n});\n\nconst LinksBox = styled('div')({\n  fontSize: 14,\n  flex: 1,\n  textAlign: 'right',\n});\n\nconst NoData = styled('div')({\n  flex: 1,\n  padding: '8px 16px',\n  fontSize: 14,\n  color: 'gray',\n  textAlign: 'center',\n});\n\nconst SourceLink = styled('a')({\n  display: 'block',\n  color: 'gray',\n});\n\nconst useStyles = makeStyles({\n  select: {\n    padding: '10px 14px',\n  },\n});\n\nconst App = () => {\n  const maxActiveCount = useSelector(selectMaxActiveCount);\n  const dataForMap = useSelector(selectDataForMap);\n  const rawData = useSelector(selectDataForGraph);\n  const dispatch = useDispatch();\n  const {\n    dataView,\n    regionCode,\n    districtCode,\n    timeIntervalMs,\n    needle,\n  } = useSelector(select);\n\n  const handleRegionDistrictChange = useCallback(\n    (event) => {\n      const code: string | null = event.target.value;\n      if (code) {\n        dispatch(\n          dataView === DataView.Region\n            ? setRegionCode(code)\n            : setDistrictCode(code)\n        );\n      }\n    },\n    [dataView, dispatch]\n  );\n\n  const handleDataViewChange = useCallback(\n    (event) => {\n      const dataView: DataView = event.target.value;\n      dispatch(switchDataView(dataView));\n    },\n    [dispatch]\n  );\n\n  useEffect(() => {\n    dispatch(fetchDataAsync());\n  }, [dispatch]);\n\n  const classes = useStyles();\n\n  return (\n    <Wrapper>\n      <Toolbar>\n        <Select\n          variant=\"outlined\"\n          style={{ marginRight: 8 }}\n          classes={{ outlined: classes.select }}\n          value={dataView}\n          onChange={handleDataViewChange}\n        >\n          {/* <MenuItem value={DataView.Country}>Stát</MenuItem> */}\n          <MenuItem value={DataView.Region}>Kraj</MenuItem>\n          <MenuItem value={DataView.District}>Okres</MenuItem>\n        </Select>\n        <Select\n          variant=\"outlined\"\n          classes={{ outlined: classes.select }}\n          value={dataView === DataView.Region ? regionCode : districtCode}\n          onChange={handleRegionDistrictChange}\n        >\n          {(dataView === DataView.Region ? allRegions : allDistricts).map(\n            ({ id, name }) => (\n              <MenuItem key={id} value={id}>\n                {name}\n              </MenuItem>\n            )\n          )}\n        </Select>\n      </Toolbar>\n      {dataView === DataView.District && (\n        <DistrictsMap\n          data={dataForMap}\n          maxActiveCount={maxActiveCount}\n          style={{ flex: 1 }}\n          onPointerMove={(code) => {\n            if (code) {\n              dispatch(setDistrictCode(code));\n            }\n          }}\n        />\n      )}\n      {dataView === DataView.Region && (\n        <RegionsMap\n          data={dataForMap}\n          maxActiveCount={maxActiveCount}\n          style={{ flex: 1 }}\n          onPointerMove={(code) => {\n            if (code) {\n              dispatch(setRegionCode(code));\n            }\n          }}\n        />\n      )}\n      <Toolbar>\n        <TimeIntervalToggle\n          value={timeIntervalMs}\n          onChange={(newTimeIntervalMs) => {\n            dispatch(setTimeIntervalMs(newTimeIntervalMs));\n          }}\n        />\n        <LinksBox>\n          <SourceLink\n            href=\"https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Zdroj dat\n          </SourceLink>\n          <SourceLink\n            href=\"https://github.com/jhrdina/covid-dashboard\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Zdrojový kód\n          </SourceLink>\n        </LinksBox>\n      </Toolbar>\n      {rawData.length > 0 ? (\n        <Graph\n          data={rawData}\n          needle={needle.getTime()}\n          onChangeNeedle={(needle) => dispatch(setNeedle(new Date(needle)))}\n        />\n      ) : (\n        <NoData>Žádná data</NoData>\n      )}\n    </Wrapper>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import {\n  configureStore,\n  ThunkAction,\n  Action,\n  getDefaultMiddleware,\n} from '@reduxjs/toolkit';\nimport rootReducer from './state';\n\nexport const store = configureStore({\n  reducer: {\n    root: rootReducer,\n  },\n  middleware: getDefaultMiddleware({\n    serializableCheck: false,\n    immutableCheck: false,\n  }),\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { Provider } from 'react-redux';\nimport * as serviceWorker from './serviceWorker';\nimport { store } from './model/store';\n\nReactDOM.render(\n  // <React.StrictMode>\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  // </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}